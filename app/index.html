<!DOCTYPE html>
<html lang="en" ng-app="co-op">
<head>
	<meta charset="utf-8">
	<title>NNFC -- Northland Natural Food Co-op</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    
	<!-- Google Font -->
	<link href='http://fonts.googleapis.com/css?family=Raleway:700,500' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="lib/bower_components/angular-loading-bar/build/loading-bar.css" type="text/css">
	
	<link href="css/bootstrap.css" rel="stylesheet" media="screen">
    
	<link href="css/site.css" rel="stylesheet" type="text/css" media="screen">
	
	<link href="css/banner.css" rel="stylesheet" media="screen">
	<link rel="stylesheet" href="css/animations.css" title="animations" type="text/css" media="screen">
	
	<!-- DateJS -->
	<script src="lib/bower_components/datejs/date-en-NZ.min.js" type="text/javascript" charset="utf-8"></script>
		
	<script src="lib/bower_components/jquery/dist/jquery.min.js"></script>
	<!-- Include all compiled plugins (below), or include individual files as needed -->
	<!-- universal angular data here -->
	
	<script src="lib/bower_components/angular/angular.min.js"></script>
	
	<!-- project-specific angular data here -->
	<script src="lib/bower_components/angular-animate/angular-animate.js"></script>
	<script src="lib/bower_components/angular-route/angular-route.js" ></script>
	<script src="lib/bower_components/angular-resource/angular-resource.js"></script>
	<script src="lib/bower_components/angular-cookies/angular-cookies.js"></script>
	<script src="js/app.js"></script>
	<script src="js/services.js"></script>
	<script src="js/controllers.js"></script>
	<script src="js/filters.js"></script>
	<script src="js/directives.js"></script>
	<script src="lib/bower_components/angular-loading-bar/build/loading-bar.min.js"></script>
		
	<script src="lib/bower_components/angular-bootstrap/ui-bootstrap-tpls.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/bower_components/lodash/dist/lodash.compat.min.js" type="text/javascript" charset="utf-8"></script>
	<!--lodash: Restangular Dependency-->
	<script src="lib/bower_components/restangular/dist/restangular.min.js"></script>
	
	<!-- cropme dependencies -->

	<script src="lib/bower_components/angular-sanitize/angular-sanitize.js"></script>
	<script src="lib/bower_components/angular-touch/angular-touch.js"></script>
	<script src="lib/bower_components/angular-superswipe/superswipe.js"></script>
	<script src="lib/bower_components/angular-cropme/cropme.js"></script>
	
	<!-- Other plugins here -->	
	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?&libraries=places&sensor=true"></script>
	
	<script type="text/javascript"> 
	var $buoop = {}; 
	$buoop.ol = window.onload; 
	window.onload=function(){ 
	 try {if ($buoop.ol) $buoop.ol();}catch (e) {} 
	 var e = document.createElement("script"); 
	 e.setAttribute("type", "text/javascript"); 
	 e.setAttribute("src", "//browser-update.org/update.js"); 
	 document.body.appendChild(e); 
	} 
	</script>

</head>

<body>
	<div id="wrap" ng-controller="navCtrl" ng-init="cart = {open: false}"><!--Sticky footer hack: wrap all page content-->
		
		<div id="sidebar" class="sidebar" ng-show="panelDisplay" ng-class="{'wide-sidebar':cart.open, 'narrow-sidebar':!cart.open}" >
			<a href="" id="close-sidebar-button" class="panel-btn panel-btn-lg" ng-click="panelDisplay = false">&times;</a>
			<div class="form-group" ng-show="storePage()">
				<div class="input-group">
					<label class="sr-only" for="storeSearch">Search the store</label>
					<div class="input-group-addon"><span class="glyphicon glyphicon-search"></span></div>
					<input ng-model="search" class="form-control" 
					typeahead="keyword for keyword in predictiveSearch | filter:$viewValue | limitTo:8"
					name="storeSearch" type="search" placeholder="Search"/>
				</div>
			</div>
			
			<br>
			
			<div id="calendar-container" ng-controller="calendarCtrl" ng-click="href('/calendar')">
				<h1 class="text-center"><span class="glyphicon glyphicon-calendar"></span></h1>
				<p>
					Product Uploading {{inDateRange(countDown[0].ProductUploadStart, countDown[0].ProductUploadStop)}}.<br>
					Shopping {{inDateRange(countDown[0].ShoppingStart, countDown[0].ShoppingStop)}}.<br>
					Delivery Day is in <span class="label label-default">{{daysBeforeDeliveryDay}}</span> days<br>
					<span ng-if="daysBeforeDeliveryDay < 1">Next delivery day in {{countDown[1].DeliveryDay.daysUntil}} days</span>
				</p>
			</div>
			
			<accordion close-others="false" ng-if="currentUser" >
				<accordion-group is-open="cart.open" ng-class="{'panel-open-sidebar':cart.open}">
					<accordion-heading>
					<h1 class="text-center"><span class="glyphicon glyphicon-shopping-cart"></span> <span class="badge">{{cartTally}}</span></h1>
					</accordion-heading>
						<div ng-controller="cartPageCtrl">
							[ <a href="" ng-click="predicate=''" class="close-sidebar-button">unsorted</a> ]
							<table class="table">
								<thead>
									<tr>
										<th><a href="" ng-click="predicate = '_id'; reverse=!reverse" tooltip-placement="right" tooltip="Remove Items">&times;</a></th>
										<th><a href="" ng-click="predicate = 'product.productName'; reverse=!reverse">Product</a></th>
										<th><a href="" ng-click="predicate = 'quantity'; reverse=!reverse">Quantity</a></th>
										<th><a href="" ng-click="predicate = 'orderPriceWithMarkup'; reverse=!reverse">Price</a></th>
										<th><a href="" ng-click="predicate = 'supplier.producerData.companyName' || 'supplier.name'; reverse=!reverse">Producer</a></th>
									</tr>
								</thead>
								<tfoot>
									<tr>
										<td colspan="5"><strong>Total: {{cartTotal(cart)|currency}}</strong></td>
									</tr>
								</tfoot>
								<tbody>
									<tr ng-repeat="c in cart | orderBy:predicate:reverse" >
								        <td data-title=" 'remove' ">
								        	<button type="button" class="close" aria-hidden="true" ng-click="delete($index)">&times;</button>
										</td>
								        <td data-title="'Product'" >
								            <a href="" ng-click="open(c)">{{c.product.fullName}}</a>
								        </td>
								        <td data-title="'Quantity'">
											<div class="input-group">
												<div class="input-group-btn">
													<button class="btn btn-default" ng-click="quantityChange($index)" ng-show="quantity.$dirty">Save</button>
												</div>
												 <input name="quantity" type="number" class="form-control" ng-model="c.quantity">
											</div>
								        </td>
								        <td data-title="'Price'">
								            {{c.unitPriceWithMarkup * c.quantity | currency}}
								        </td>
								        <td data-title="'Customer'">
								            {{c.supplier.producerData.companyName || c.supplier.name}}
								        </td>
								    </tr>
								</tbody>
							</table>
						</div>
				</accordion-group>
			</accordion>
			<ul class="nav nav-pills nav-stacked">
					<li ng-class="{active:isActive('/producer-list')}"><a href="#/producer-list">Producer List</a></li>
					<li ng-class="{active:isActive('/producer-list')}"><a href="#/route-manager-directory">Route Manager List</a></li>
					<li ng-class="{active:isActive('/faq')}"><a href="#/faq">User FAQ</a></li>
					<li ng-class="{active:isActive('/my-cart')}" ng-show="currentUser"><a href="#/my-cart">Cart Page</a></li>
					<li ng-class="{active:isActive('/order-manager')}" 
					ng-show="currentUser && currentUser.user_type.name === 'Producer' && currentUser.user_type.canSell"
					><a href="#/product-manager">My Products</a></li>
					<li ng-class="{active:isActive('/product-upload')}" 
					ng-show="currentUser && currentUser.user_type.name === 'Producer' && currentUser.user_type.canSell"
					><a href="#/product-upload">Upload a Product</a></li>
					<li ng-class="{active:isActive('/producer-profile')}" 
					ng-show="currentUser && currentUser.user_type.name === 'Producer'"
					><a href="#/producer-profile">Edit Producer Profile</a></li>
					<li ng-class="{active:isActive('/my-invoices')}" ng-show="currentUser"><a ng-href="#/my-invoices">Invoices</a></li>
					<li ng-class="{active:isActive('/me/{{currentUser._id}}')}" ng-show="currentUser"><a ng-href="#/me/{{currentUser._id}}">Settings</a></li>
			</ul>
			<ul class="nav nav-pills nav-stacked sidebar-bottom" ng-controller="logoutCtrl">
				<li ng-show="currentUser != null"><a ng-click="logOut()" class="text-center"><h1><span class="glyphicon glyphicon-lock"></span></h1><p>Log Out</p></a></li>
			</ul>
		</div>

		<header id="banner" scroll>
			<div ng-if="currentUser == null">
				<ng-include src=" 'partials/login.html' "></ng-include>
			</div>
			<div id="grass-containter">
				<div class="container">
					<section class="feature-box">
						<h1 class="logo">NNFC</h1>
						<h2 class="slogan">Local • Sustainable • Affordable</h2>
					</section>
				</div>
			</div>
		</header>
	
		
    

		<div class="container-fluid app-body" id="app" ng-class="{'menu-open-narrow' : panelDisplay && !cart.open, 'menu-open-wide': panelDisplay && cart.open}">
			<nav class="horizontal-nav">
				<ul class="nav nav-pills pull-left">
					<li class="pull-left" ng-click="panelDisplay = !panelDisplay"><a class="panel-btn panel-btn-sml">&#9776; Sidebar</a></li>
				</ul>

				<ul class="nav nav-pills pull-right">
					<li ng-class="{active:isActive('/store')}"><a href="#/store"><span class="glyphicon glyphicon-shopping-cart"></span> Store</a></li>
					<li ng-class="{active:isActive('/home')}"><a href="#home">Home</a></li>
					<li ng-class="{active:isActive('/about')}"><a href="#/about">About Us</a></li>
					<li ng-class="{active:isActive('/signup')}" ng-hide="currentUser != null"><a href="#signup">Join Us</a></li>
					
					<li ng-class="{active:isActive('/contact')}"><a href="#contact">Contact Us</a></li>
					<li><a href="http://foodcoop.org.nz" target="_blank">Blog</a></li>
					
				</ul>
			</nav>
			<div class="row">
				<div class="col-md-12">
					<alert type="{{alert.type}}" ng-repeat="alert in queue" close="flash.closeMessage($index)" role="alert">
						{{alert.message}}
					</alert>
					
					
				<!--  This is where the partials go for the forms and information pages. /-->    
										
					<div id="view" ng-view class="template-container"></div>
					
				</div>
				
            

			</div> <!-- End of "row" /--> 
		</div> <!-- End of "container" /--> 
    
			<div id="push"></div>
		</div><!--End hack-->

		<div id="footer">
			<div class="container-fluid">
				<div class="row">
					<section class="col-md-6">
						<h3>NNFC</h3>
						<h4>Local • Sustainable • Affordable</h4>
					</section>
					<section class="col-md-3 col-md-push-3">
						<nav id="footer-nav">
							<ul class="nav">
								<li><a href="#/about">About Us</a></li>
								<li><a href="#/contact">Contact Us</a></li>
								<li><a href="#/policy">Co-op Policy</a></li>
								<li><a href="#/terms-cons">Terms and Conditions</a></li>
								<li><a href="#/priv-pol">Privacy Policy</a></li>
							</ul>
						</nav>
					</section>
				</div>
			</div>
		</div>

		<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-45071933-1', 'strategicdevelopment.co.nz');
		ga('send', 'pageview');

		</script>

	</body>
	</html>
